<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Image to Prompt</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#020617">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  background:#0f172a;color:#e5e7eb;
  font-family:Arial;
  display:flex;justify-content:center;align-items:center;
  min-height:100vh;
}
.card{
  width:420px;background:#020617;
  padding:20px;border-radius:14px;
}
textarea{width:100%;height:220px;margin-top:10px;}
button{width:100%;margin-top:10px;}
</style>
</head>

<body>
<div class="card">
<h2>ðŸ“· AI Image â†’ Prompt</h2>

<input type="file" id="img" accept="image/*">
<select id="style">
  <option>realistic</option>
  <option>cinematic</option>
  <option>anime</option>
  <option>3d illustration</option>
</select>

<textarea id="out" placeholder="AI prompt will appear here..."></textarea>
<button onclick="send()">Generate Prompt</button>
</div>

<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}

let base64="";
document.getElementById("img").onchange=e=>{
  const r=new FileReader();
  r.onload=()=>base64=r.result;
  r.readAsDataURL(e.target.files[0]);
}

async function send(){
  document.getElementById("out").value="Analyzing...";
  const res = await fetch("/api/analyze", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      image:base64,
      style:document.getElementById("style").value
    })
  });
  const data = await res.json();
  document.getElementById("out").value = data.prompt;
}
</script>
</body>
</html>
